//------------------------------------------------
// main.mod   – drives the whole pipeline
//------------------------------------------------

@#include "declarations.mod"      // var … varexo … parameters …

model;
  @#include "equations_ineL.mod"
end;


steady_state_model;
    // 1) Aggregate steady state
    w    = 0.05172677310161178;
    L    = 0.06145534267502116;
    r    = 0.04166666666666674;
    C    = 0.05596494221025121;
    
    // 2) Sectoral steady state (I = 9)
    M1   = 0.0002851937014842398;
    M2   = 0.00043221329332276596;
    M3   = 0.0005007462681750897;
    M4   = 0.0005565754591233685;
    M5   = 0.0005970786950923885;
    M6   = 0.0006277030776394567;
    M7   = 0.0006533816289166024;
    M8   = 0.000667286213093375;
    M9   = 0.0006674787127093152;
    
    C1   = 1.3694464918935494e-5;
    C2   = 3.633415455870449e-5;
    C3   = 6.893604811721553e-5;
    C4   = 0.0001358013530653787;
    C5   = 0.0002559874594890764;
    C6   = 0.0004709550107690367;
    C7   = 0.0008913112614845559;
    C8   = 0.0015404725179458299;
    C9   = 0.010015959950818583;
    
    rho1 = 0.05419741168809346;
    rho2 = 0.06287291762685104;
    rho3 = 0.06626619640410793;
    rho4 = 0.06881564136394608;
    rho5 = 0.07056392104524571;
    rho6 = 0.07183577912262405;
    rho7 = 0.07287181961553382;
    rho8 = 0.07342192529580542;
    rho9 = 0.0734294891854977;
    
    v1   = 0.08276283696257883;
    v2   = 0.14489292185325425;
    v3   = 0.23727877569546682;
    v4   = 0.4205428707448111;
    v5   = 0.7389539014515968;
    v6   = 1.2931693275402942;
    v7   = 2.351216959164171;
    v8   = 3.9789825462778285;
    v9   = 25.863386550805885;
    
    d1   = 0.01263634694195291;
    d2   = 0.02212245613086994;
    d3   = 0.036228058893213615;
    d4   = 0.06420907998959811;
    d5   = 0.11282452626743669;
    d6   = 0.1974429209680142;
    d7   = 0.3589871290327531;
    d8   = 0.6075166799015822;
    d9   = 3.9488584193602843;
    
    e1   = 4.8630845338462756e-5;
    e2   = 0.00012902735968931236;
    e3   = 0.00024480096988657864;
    e4   = 0.00048224845853924483;
    e5   = 0.000909045123317382;
    e6   = 0.0016724231596968004;
    e7   = 0.003165163470224502;
    e8   = 0.005470420437149818;
    e9   = 0.0355679905836261;
    
    psi1 = 2.4849167507183568e-5;
    psi2 = 2.962350244842537e-5;
    psi3 = 2.7781198791930234e-5;
    psi4 = 2.416213425111354e-5;
    psi5 = 2.0357549454442965e-5;
    psi6 = 1.6837942332060095e-5;
    psi7 = 1.356527323909209e-5;
    psi8 = 1.1057426631013021e-5;
    psi9 = 4.958929060919093e-6;

    y1   = 0.04801811837942105;
    y2   = 0.08406533329730576;
    y3   = 0.1376666237942117;
    y4   = 0.2439945039604728;
    y5   = 0.42873319981625935;
    y6   = 0.7502830996784539;
    y7   = 1.3641510903244616;
    y8   = 2.308563383626012;
    y9   = 15.005661993569078;


  // 3) Exogenous state shifters
  Z     = 1.0;
  Zlag  = 1.0;
  fE    = fE_par;
  X     = 1.0;

  // 4) Log variables for IRFs

    @#for i in 1:I
        logM@{i} = log(M@{i});
        logC@{i} = log(C@{i});
        logd@{i} = log(d@{i});
        logv@{i} = log(v@{i});
        loge@{i} = log(e@{i});
    @#endfor

    logC = log(C);
    logw = log(w);
    logL = log(L);
  end;


@#include "calibration_ineL.mod"       // parameter numbers, shocks, initval …

// -------- Solve & simulate --------

//steady;
check;


// model_info ;
model_diagnostics;


stoch_simul(order=2, irf=75) logC logw logL C w L     ;


