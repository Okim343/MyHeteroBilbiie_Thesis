//------------------------------------------------
// main.mod   – drives the whole pipeline
//------------------------------------------------

@#include "declarations.mod"      // var … varexo … parameters …

model;
  @#include "equations.mod"
end;


steady_state_model;
    // 1) Aggregate steady state
    w    = 0.12483649119703466;
    L    = 0.9999999999999901;
    r    = 0.04166666666666674;
    C    = 1.700502012234013;
    
    // 2) Sectoral steady state (I = 9)
    M1   = 0.004559399487402696;
    M2   = 0.0060984405328082655;
    M3   = 0.00679401436396794;
    M4   = 0.007348293036444399;
    M5   = 0.007736560894585283;
    M6   = 0.008026462155716108;
    M7   = 0.008267652511255295;
    M8   = 0.008356225894959664;
    M9   = 0.008105934217652837;
    
    C1   = 0.0005283709731120168;
    C2   = 0.0012372626402490478;
    C3   = 0.002257258459745033;
    C4   = 0.0043270576124250625;
    C5   = 0.00800499804952901;
    C6   = 0.01453367663733714;
    C7   = 0.02721891794628129;
    C8   = 0.04655626609152029;
    C9   = 0.2935515660009538;
    
    rho1 = 0.1458463577534608;
    rho2 = 0.1618105044752964;
    rho3 = 0.1681742309113587;
    rho4 = 0.17295126312074216;
    rho5 = 0.17616108702587416;
    rho6 = 0.17849077378137518;
    rho7 = 0.18038812063843157;
    rho8 = 0.18107595136614643;
    rho9 = 0.17911994835341133;
    
    psi1 = 0.0003972643189698825;
    psi2 = 0.00041798151710320476;
    psi3 = 0.0003769291468281624;
    psi4 = 0.0003190051590538007;
    psi5 = 0.0002637800047353208;
    psi6 = 0.00021530738293757136;
    psi7 = 0.00017165001340335996;
    psi8 = 0.00013846885029641408;
    psi9 = 6.0221774855796305e-5;
    
    v1   = 0.19973838591525545;
    v2   = 0.34968204817096543;
    v3   = 0.572644455032269;
    v4   = 1.0149308227401193;
    v5   = 1.7833784456719235;
    v6   = 3.120912279925866;
    v7   = 5.674385963501575;
    v8   = 9.602807015156513;
    v9   = 62.418245598517316;
    
    d1   = 0.030496339114040483;
    d2   = 0.05338994942934258;
    d3   = 0.0874321648911711;
    d4   = 0.15496107273394555;
    d5   = 0.27228874208964715;
    d6   = 0.4765052986568825;
    d7   = 0.866373270285241;
    d8   = 1.466170149713485;
    d9   = 9.53010597313765;
    
    e1   = 0.0007774626513636379;
    e2   = 0.001820549465568896;
    e3   = 0.0033214052933114514;
    e4   = 0.006366976717409481;
    e5   = 0.011778820799128472;
    e6   = 0.021385335961917763;
    e7   = 0.040050822605046464;
    e8   = 0.06850444084753071;
    e9   = 0.4319415532440022;


  // 3) Exogenous state shifters
  Z     = 1.0;
  Zlag  = 1.0;
  fE    = fE_par;
  X     = 1.0;

  // 4) Log variables for IRFs

    @#for i in 1:I
        logM@{i} = log(M@{i});
        logC@{i} = log(C@{i});
        logd@{i} = log(d@{i});
        logv@{i} = log(v@{i});
        loge@{i} = log(e@{i});
    @#endfor

    logC = log(C);
    logw = log(w);
    logL = log(L);
  end;


@#include "calibration_ine.mod"       // parameter numbers, shocks, initval …

// -------- Solve & simulate --------

//steady;
check;


// model_info ;
model_diagnostics;


stoch_simul(order=2, irf=50) logC logw logL C w L     ;


